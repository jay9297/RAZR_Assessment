<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>RAZR Assessment</title>
  <h1>An Exercise in Shapes</h1>
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script src="shapes.js"></script>
  <script>
    /**
     * Function to generate an array of circles and squares of random sizes.
     * This function will be called twice every second.
     */
    function generateShapes() {
      // Create an empty array to fill with shapes
      this.shapes = [];

      // Create 50 squares of random size
      for(let i = 0; i < 50; i++) {
        let length = Math.floor(Math.random() * 100) + 1;
        let square = new Square(length);
        this.shapes.push(square);
      }

      // Create 50 circles of random size
      for(let i = 0; i < 50; i++) {
        let diam = Math.floor(Math.random() * 100) + 1;
        let circle = new Circle(diam);
        this.shapes.push(circle);
      }

      // Sort the shapes generated by area
      sortShapes(this.shapes);

      // Print the shapes to the screen
      drawShapes(this.shapes);

      // TEST: Print the shapes out to the console using their toString methods
      this.shapes.forEach(shape => {
        console.log(shape.toString());
      });
    }

    /**
     * Function to sort array of shapes passed in by each shape's area
     */
    function sortShapes(shapes) {
      shapes.sort((a, b) => {
        return b.getArea() - a.getArea();
      });
    }

    /**
     * Function to create the squares and circles as CSS elements on the screen
     */
    function drawShapes(shapes) {
      // If there are any current shapes, delete them
      $('#shapes').empty();

      // Iterate over the array of shapes and draw each shape to the screen
      shapes.forEach(shape => {
        // Determine if shape is either a circle or shape
        if(shape.constructor.name == 'Circle') {
          // Create the circle and add it to the shapes div
          let circle = {
            class : 'circle',
            css : {
              'background-color' : 'Blue',
              'height' : shape.getRadius() + 'px',
              'width' : shape.getRadius() + 'px',
              'border-radius' : '50%',
              'margin': '10px 10px 10px 10px'
            }
          };
          let $div = $('<div>', circle);
          $('#shapes').append($div);
        }

        else if(shape.constructor.name == 'Square') {
          // Create the square and add it to the shapes div
          let square = {
            class : 'square',
            css : {
              'background-color' : 'Red',
              'height' : shape.getSize() + 'px',
              'width' : shape.getSize() + 'px',
              'margin': '10px 10px 10px 10px'
            }
          };
          let $div = $('<div>', square);
          $('#shapes').append($div);
        }
      });
    }
  </script>
</head>
<body onload='setInterval(generateShapes, 500)'>
  <div class='container'>
    <div id='shapes'>

    </div>
  </div>
</body>
</html>